= 22-Shell Compatibility Matrix
:toc:

== Overview

The `_pathroot` project provides entry point scripts for 22 different shells, ensuring universal compatibility across all major shell environments.

**Status:** All 22 shells implemented ✅

== Supported Shells

[cols="1,2,2,1"]
|===
|Shell |Description |Script |Status

|bash
|Bourne Again Shell (most common)
|`bash/pathroot.sh`
|✅

|zsh
|Z Shell (macOS default)
|`zsh/pathroot.zsh`
|✅

|fish
|Friendly Interactive Shell
|`fish/pathroot.fish`
|✅

|dash
|Debian Almquist Shell (POSIX)
|`dash/pathroot.sh`
|✅

|ksh
|Korn Shell
|`ksh/pathroot.ksh`
|✅

|mksh
|MirBSD Korn Shell
|`mksh/pathroot.sh`
|✅

|yash
|Yet Another Shell
|`yash/pathroot.sh`
|✅

|tcsh
|TENEX C Shell
|`tcsh/pathroot.csh`
|✅

|csh
|C Shell
|`csh/pathroot.csh`
|✅

|ash
|Almquist Shell
|`ash/pathroot.sh`
|✅

|nushell
|Nu Shell (structured data)
|`nushell/pathroot.nu`
|✅

|elvish
|Elvish Shell
|`elvish/pathroot.elv`
|✅

|ion
|Ion Shell (Redox OS)
|`ion/pathroot.sh`
|✅

|oil
|Oil Shell (compatible upgrade)
|`oil/pathroot.oil`
|✅

|xonsh
|Python-powered shell
|`xonsh/pathroot.xsh`
|✅

|powershell
|PowerShell Core (cross-platform)
|`powershell/pathroot.ps1`
|✅

|pwsh
|PowerShell 7+ alias
|`pwsh/pathroot.ps1`
|✅

|cmd
|Windows Command Prompt
|`cmd/pathroot.cmd`
|✅

|rc
|Plan 9 shell
|`rc/pathroot.sh`
|✅

|es
|Extensible Shell
|`es/pathroot.sh`
|✅

|scsh
|Scheme Shell
|`scsh/pathroot.sh`
|✅

|minix-sh
|Minix shell
|`minix-sh/pathroot.sh`
|✅
|===

== Architecture

Each shell script follows the same pattern:

1. **Detect _pathroot installation**
   - Check `$PATHROOT_HOME` environment variable
   - Fall back to `~/.pathroot`
   - Fall back to `$XDG_DATA_HOME/pathroot`

2. **Source shell-specific environment**
   - Load `env.sh`, `env.fish`, `env.nu`, etc.

3. **Execute _pathroot validation**
   - Run via Deno runtime
   - Pass through all arguments

== Shell Detection

The `detect-shell.sh` script automatically detects the current shell and routes to the appropriate entry point:

[source,bash]
----
# Automatic detection
./scripts/detect-shell.sh

# Detects shell from:
# 1. $SHELL environment variable
# 2. Parent process (via ps)
# 3. $0 (script name)
----

== Testing

Run the test suite to verify all shells:

[source,bash]
----
# Bash test suite
./scripts/test-shells.sh

# Julia test suite (requires Julia)
./scripts/test-shells.jl
----

Test output shows:
- ✓ = Shell available on system
- ○ = Shell not installed (script still created)

== Usage Examples

=== Bash
[source,bash]
----
bash scripts/all-shells/bash/pathroot.sh
----

=== Fish
[source,fish]
----
fish scripts/all-shells/fish/pathroot.fish
----

=== Nushell
[source,nu]
----
nu scripts/all-shells/nushell/pathroot.nu
----

=== PowerShell
[source,powershell]
----
pwsh scripts/all-shells/powershell/pathroot.ps1
----

== Platform Coverage

[cols="1,3"]
|===
|Platform |Shells

|Linux
|bash, zsh, dash, ksh, mksh, fish, nushell, elvish, ion, oil, tcsh, csh, ash

|macOS
|bash, zsh, fish, ksh, tcsh, csh

|Windows
|powershell, pwsh, cmd

|BSD
|bash, zsh, ksh, tcsh, csh, ash

|Minix
|minix-sh, ash, dash

|Plan 9
|rc

|Redox OS
|ion
|===

== Environment Variables

Each shell script respects:

- `PATHROOT_HOME` - Override installation location
- `XDG_DATA_HOME` - XDG base directory
- `PATHROOT_ROOT` - Set by scripts, points to installation

== Contributing

To add a new shell:

1. Create directory: `scripts/all-shells/<shell-name>/`
2. Create entry script: `pathroot.<ext>`
3. Follow the pattern: detect → source → exec
4. Update `SHELLS.txt` and this README
5. Add to test suite

== References

- link:../../README.adoc[_pathroot README]
- link:SHELLS.txt[Complete Shell List]
- link:../detect-shell.sh[Shell Detection Router]
- link:../test-shells.sh[Test Suite]
