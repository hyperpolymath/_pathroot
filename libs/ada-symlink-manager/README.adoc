= Ada Symlink Manager
:author: Hyper Polymath
:toc:
:source-highlighter: rouge

Cross-platform symbolic link management library for Ada.

== Features

* Create symbolic links with validation
* Check link status (valid, broken, missing)
* Read link targets
* Audit directories for symlink health
* JSON serialization for results
* Works on Windows and POSIX platforms

== Installation

=== Using Alire

[source,bash]
----
alr with symlink_manager
----

=== Manual

Add to your GPR project:

[source,ada]
----
with "symlink_manager.gpr";
----

== Usage

[source,ada]
----
with Symlink_Manager;
with Ada.Text_IO;
with Ada.Strings.Unbounded;

procedure Example is
   use Symlink_Manager;
   use Ada.Strings.Unbounded;

   Error : Unbounded_String;
   Success : Boolean;
begin
   --  Create a symbolic link
   Success := Create_Link
     (Link_Path   => "/usr/local/bin/myapp",
      Target_Path => "/opt/myapp/bin/myapp",
      Error_Msg   => Error);

   if not Success then
      Ada.Text_IO.Put_Line ("Error: " & To_String (Error));
   end if;

   --  Check if path is a symlink
   if Is_Symbolic_Link ("/usr/local/bin/myapp") then
      Ada.Text_IO.Put_Line ("Target: " & Get_Link_Target ("/usr/local/bin/myapp"));
   end if;

   --  Audit a directory
   declare
      Result : constant Audit_Result := Audit_Directory ("/usr/local/bin", Recursive => False);
   begin
      Ada.Text_IO.Put_Line ("Found " & Natural'Image (Result.Total_Links) & " links");
      Ada.Text_IO.Put_Line ("Valid: " & Natural'Image (Result.Valid_Links));
      Ada.Text_IO.Put_Line ("Broken: " & Natural'Image (Result.Broken_Links));
      Ada.Text_IO.Put_Line (Audit_To_JSON (Result));
   end;
end Example;
----

== API Reference

=== Types

[source,ada]
----
type Link_Status is
  (Link_Valid,       --  Link exists and points to valid target
   Link_Broken,      --  Link exists but target is missing
   Link_Missing,     --  Link does not exist
   Link_Not_Link,    --  Path exists but is not a symbolic link
   Link_Error);      --  Error checking link status

type Link_Info is record
   Link_Path   : Unbounded_String;
   Target_Path : Unbounded_String;
   Status      : Link_Status;
   Error_Msg   : Unbounded_String;
end record;

type Audit_Result is record
   Total_Links   : Natural;
   Valid_Links   : Natural;
   Broken_Links  : Natural;
   Missing_Links : Natural;
   Errors        : Natural;
end record;
----

=== Functions

|===
| Function | Description

| `Create_Link` | Create a symbolic link with validation
| `Remove_Link` | Remove a symbolic link (safe - won't delete regular files)
| `Is_Symbolic_Link` | Check if path is a symbolic link
| `Get_Link_Target` | Get the target path of a symbolic link
| `Check_Link_Status` | Get detailed status of a link
| `Audit_Directory` | Audit all symlinks in a directory
| `Status_To_String` | Convert status to string
| `Audit_To_JSON` | Convert audit result to JSON
| `Link_Info_To_JSON` | Convert link info to JSON
|===

== License

AGPL-3.0-or-later

== Contributing

Contributions welcome! Please submit pull requests to the GitHub repository.
