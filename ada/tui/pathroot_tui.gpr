-- _pathroot TUI - GNAT Project File
-- Ada-based Terminal User Interface for devtools environment management

project Pathroot_TUI is

   -- Build mode: debug or release
   type Build_Mode_Type is ("debug", "release");
   Build_Mode : Build_Mode_Type := external ("BUILD_MODE", "debug");

   -- Platform: windows or posix
   type Platform_Type is ("windows", "posix");
   Platform : Platform_Type := external ("PLATFORM", "posix");

   for Source_Dirs use ("src", "src/ui", "src/core", "src/platform");
   for Object_Dir use "obj/" & Build_Mode;
   for Exec_Dir use "bin";
   for Main use ("pathroot_tui.adb");

   package Compiler is
      Common_Switches := ("-gnat2022", "-gnatwa", "-gnatyg");

      case Build_Mode is
         when "debug" =>
            for Default_Switches ("Ada") use
              Common_Switches & ("-g", "-O0", "-gnata", "-gnatVa");
         when "release" =>
            for Default_Switches ("Ada") use
              Common_Switches & ("-O2", "-gnatn");
      end case;
   end Compiler;

   package Binder is
      for Default_Switches ("Ada") use ("-E");
   end Binder;

   package Linker is
      case Platform is
         when "windows" =>
            for Default_Switches ("Ada") use ();
         when "posix" =>
            for Default_Switches ("Ada") use ("-lncurses");
      end case;
   end Linker;

   package Builder is
      for Executable ("pathroot_tui.adb") use "pathroot-tui";
   end Builder;

end Pathroot_TUI;
